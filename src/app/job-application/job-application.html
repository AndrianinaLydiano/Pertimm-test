<div class="min-h-screen flex items-center justify-center bg-gray-100 p-4">
  <form (ngSubmit)="onSubmit()" class="bg-white p-6 rounded shadow-md w-full max-w-md">
    <h2 class="text-2xl font-semibold mb-6 text-center">Postuler à l'offre</h2>

    <label class="block mb-1 text-sm font-medium text-gray-700">Email</label>
    <input [(ngModel)]="email" name="email" type="email" class="w-full p-2 border rounded mb-4" required />

    <label class="block mb-1 text-sm font-medium text-gray-700">Prénom</label>
    <input [(ngModel)]="first_name" name="first_name" class="w-full p-2 border rounded mb-4" required />

    <label class="block mb-1 text-sm font-medium text-gray-700">Nom</label>
    <input [(ngModel)]="last_name" name="last_name" class="w-full p-2 border rounded mb-6" required />

    <button type="submit" [disabled]="loading || polling"
      class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition"
      [ngClass]="{ 'cursor-not-allowed': loading || polling, 'cursor-pointer': !(loading || polling) }"
    >
      {{ loading ? 'Envoi...' : 'Soumettre la candidature' }}
    </button>

    <div *ngIf="polling" class="flex justify-center items-center mt-4 text-blue-700">
      <svg class="animate-spin h-5 w-5 mr-2" viewBox="0 0 24 24">
        <circle
          cx="12"
          cy="12"
          r="10"
          stroke="currentColor"
          fill="none"
          stroke-width="4"
          stroke-linecap="round"
          stroke-dasharray="60"
          stroke-dashoffset="20"
        />
      </svg>
      Vérification du statut...
    </div>

    <div *ngIf="confirmationUrl && !polling" class="text-center mt-6">
      <button (click)="confirmApplication()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 cursor-pointer">
        Confirmer la candidature
      </button>
    </div>
  </form>
</div>
